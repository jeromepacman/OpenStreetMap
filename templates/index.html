<!DOCTYPE html>
{% load static %}
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""/>

    <title>Geek Garage</title>

    <style type="text/css">

        #map {
            height: 400px;
        }
    </style>
</head>

<body>
    <header>
        <img src=" {% static 'img/nerds-logo-new.png' %}" alt="nerds_logo" width="500" height="90" >
        <img src=" {% static 'img/shopcrop.jpg' %}" alt="shop"  height="200">
    </header>

    <nav>
        <ul>
            <li>
                <a href="/">Home</a>
            </li>
            <li>
                <a href="{% url 'contact' %}">Contact</a>
            </li>
              {% if not request.user.is_authenticated %}
            <li>
                <a href="#">Login</a>
            </li>
                {% endif %}
              {% if request.user.is_authenticated %}
            <li>
                <a href="{% url 'create' %}">Position</a>
            </li>
            <li>
                <a href="#">Logout</a>
            </li>
              {%  endif %}
        </ul>
    </nav>
    <h3>Choose your local center</h3>

    <div id="map">
        <!-- display map -->
    </div>
    <script type="text/javascript">

        var lat = 47.222990;
        var lon = 2.065970;

        function initMap() {

            citymap = L.map('map').setView([lat, lon], 6);

            L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {

                attribution: 'Â© OpenStreetMap/ODbL - OSM France',
                minZoom: 1,
                maxZoom: 20
            }).addTo(citymap);


            {% for object in object_list %}
                var marker = L.marker([ {{ object.location_lat }}, {{ object.location_lon }} ]).addTo(citymap);
                marker.bindPopup( {% include 'popup.html' %} );
            {% endfor %}
        }

        window.onload = function () {
            initMap();
        };
    </script>

    <footer>
        <div class="logo">
            <img src="{% static 'img/nerd.png' %}" width="30%" height="50">
        </div>
    </footer>

<script
        src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin="">
</script>
</body>
</html>